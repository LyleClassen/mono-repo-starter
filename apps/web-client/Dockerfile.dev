FROM node:22-alpine

# Install pnpm
RUN corepack enable && corepack prepare pnpm@10.18.0 --activate

WORKDIR /app

# Copy workspace config
COPY pnpm-workspace.yaml ./
COPY package.json pnpm-lock.yaml* ./

# Copy app package.json
COPY apps/web-client/package.json ./apps/web-client/

# Install dependencies
RUN pnpm install

# Copy app source
COPY apps/web-client ./apps/web-client

WORKDIR /app/apps/web-client

EXPOSE 3000

CMD ["pnpm", "dev"]
